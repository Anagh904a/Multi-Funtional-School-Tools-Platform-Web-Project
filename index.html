
<!DOCTYPE html>
<html lang="en">
<head>
<!-- Other head elements... -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Reset default margin and padding */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    

    .main-content {
  overflow: auto; /* Ensure content is scrollable */
  padding: 20px; /* Adjust as necessary */
}

@media (max-width: 768px) {
  .feature-section {
    padding: 10px; /* Reduce padding for mobile */
  }
}


    /* Sidebar styles */
   

    .sidebar-item {
        display: flex;
        align-items: center;
        padding: 10px;
        color: #ecf0f1;
        text-decoration: none;
        font-size: 16px;
    }

    .sidebar-item i {
        margin-right: 10px; /* Space between icon and text */
    }

    .sidebar-item:hover {
        background-color: #34495e; /* Change background on hover */
        cursor: pointer;
    }
    
    /* Sidebar styles */
        
       
.sidebar h2 {
      text-align: left;
      margin-bottom: 20px;
    }

    

    .sidebar a:hover {
      background-color: #0056b3;
    }

    .logout-btn {
      background-color: #dc3545;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin: 20px;
      width: calc(100% - 40px);
    }
    
    .sidebar-item {
            display: flex;
            align-items: left;
            padding: 10px;
            color: #ecf0f1;
            text-decoration: none;
        }

        .sidebar-item i {
            margin-right:  10px; /* Space between icon and text */
        }

        .sidebar-item:hover {
            background-color: #34495e; /* Change background on hover */
        }

        .about-info {
            margin: 15px 0;
            padding: 10px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            background-color: #ffffff;
        }
      
        .body.light .main-content {
background-color: #e6e6e6;
color:  #333;  }
    
    </style>

</head>
<body>
    
  <script>function logout() {
    window.location.href = "logout.php";
    }

</script>
  <div id="sidebar">
        <a href="#" class="sidebar-item" onclick="showSection('task-manager')">
            <i class="fas fa-tasks"></i> Task Manager
        </a>
        <a href="#" class="sidebar-item" onclick="showSection('worksheet-generator')">
            <i class="fas fa-file-alt"></i> Worksheet Generator
        </a>
        <a href="#" class="sidebar-item" onclick="showSection('quiz-generator')">
            <i class="fas fa-question-circle"></i> Quiz Generator
        </a>
        <a href="#" class="sidebar-item" onclick="showSection('tech-updates')">
            <i class="fas fa-bell"></i> Tech Updates
        </a>
        
        <a href="#" class="sidebar-item" onclick="showSection('my-notes')">
                <i class="fas fa-sticky-note"></i> My Notes
            </a>
        <a href="#" class="sidebar-item" onclick="showSection('themes')">
            <i class="fas fa-paint-brush"></i> Themes

            <a href="#" class="sidebar-item" onclick="showSection('about-website')">
              <i class="fas fa-info-circle"></i> About Website
       
              <a href="#" class="sidebar-item" onclick="showSection('user-profile')">
                <i class="fas fa-user-circle"></i> Profile
            
              <a href="#" class="sidebar-item" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout   
        </a>
    </div>

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
      import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-analytics.js";
      
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyBnxKoEbh-xOHn_ogIHAt68HSTR5EOcSuU",
        authDomain: "listvista-5ce07.firebaseapp.com",
        projectId: "listvista-5ce07",
        storageBucket: "listvista-5ce07.firebasestorage.app",
        messagingSenderId: "516531579392",
        appId: "1:516531579392:web:e9bbc06c93072808ae86e5",
        measurementId: "G-Q36NJ1B4G0"
      };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const analytics = getAnalytics(app);
      const db = getFirestore(app);
      const user = auth.currentuser;
      
      // Authentication Functions
      const authContainer = document.getElementById('auth-container');
            const authForm = document.getElementById('auth-form');
            const authTitle = document.getElementById('auth-title');
            const authButton = document.getElementById('auth-button');
            const toggleLink = document.getElementById('toggle-link');
            const closeButton = document.getElementById('close-button');
            const loadingIndicator = document.getElementById('loading-indicator');
            let isLogin = true; // Track whether the user is logging in or registering

            // Check if there's a logged-in user in local storage
            const storedUser = JSON.parse(localStorage.getItem('user'));
            if (storedUser) {
                closeButton.style.display = 'block'; // Show the close button if a user is stored
            }

            // Check for the current user and update UI
            auth.onAuthStateChanged((user) => {
                if (user) {
                    // User is logged in
                    localStorage.setItem('user', JSON.stringify({ uid: user.uid, email: user.email }));
                    closeButton.style.display = 'block'; // Show the close button if a user is store
                } else {
                    // User is logged out
                    localStorage.removeItem('user');
                    authContainer.style.display = 'block'; // Show the auth container
                    closeButton.style.display = 'none'; // Hide the close button
                }
            });

            // Toggle between Login and Register modes
            toggleLink.addEventListener('click', () => {
                isLogin = !isLogin;
                authTitle.textContent = isLogin ? 'Login' : 'Register';
                authButton.textContent = isLogin ? 'Login' : 'Register';
                toggleLink.textContent = isLogin ? "Don't have an account? Register here." : "Already have an account? Login here.";
            });

            // Validate email format
            function isValidEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }

            // Handle form submission for login or registration
            authForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('email').value.trim();
                const password = document.getElementById('password').value.trim();

                // Input validation
                if (!isValidEmail(email) || password.length < 6) {
                    alert('Please enter a valid email and ensure the password is at least 6 characters long.');
                    return;
                }

                loadingIndicator.style.display = 'block'; // Show loading indicator

                // Determine whether to log in or register
                const authAction = isLogin ? signInWithEmailAndPassword(auth, email, password) : createUserWithEmailAndPassword(auth, email, password);

                authAction
                    .then((userCredential) => {
                        const user = userCredential.user;
                        console.log('User:', user);
                        if (isLogin) {
                            // Store user in local storage
                            localStorage.setItem('user', JSON.stringify({ uid: user.uid, email: user.email }));
                            alert('Logged in successfully!'); // Alert for successful login
                            authContainer.style.display = 'none'; // Hide the auth container
                            closeButton.style.display = 'block'; // Show close button
                        } else {
                            alert('Registration successful! You can now log in.');
                            toggleLink.click(); // Switch to login mode
                        }
                    })
                    .catch((error) => {
                        handleAuthError(error); // Enhanced error handling
                    })
                    .finally(() => {
                        loadingIndicator.style.display = 'none'; // Hide loading indicator
                    });
            });

            // Close button functionality
            closeButton.addEventListener('click', () => {
                // Hide the auth container
                authContainer.style.display = 'none';
            });

            // Error handling function
            function handleAuthError(error) {
                switch (error.code) {
                    case 'auth/user-not-found':
                        alert('No user found with this email.');
                        break;
                    case 'auth/wrong-password':
                        alert('Incorrect password. Please try again.');
                        break;
                    case 'auth/email-already-in-use':
                        alert('This email is already registered.');
                        break;
                    case 'auth/invalid-email':
                        alert('Please enter a valid email address.');
                        break;
                    default:
                        alert('Error: ' + error.message);
                }
            }

            // Show the main app after login
            function showApp() {
                const sidebar = document.getElementById('sidebar');
                const mainContent = document.getElementById('main-content');

                if (sidebar && mainContent) {
                    sidebar.style.display = 'block'; // Show sidebar
                    mainContent.style.display = 'block'; // Show main content
                } else {
                    console.error('Sidebar or main content elements not found.');
                }
            }

            // Handle click event for the close button when no user is stored
            if (!storedUser) {
                closeButton.style.display = 'none'; // Ensure the close button is hidden
                authForm.addEventListener('submit', (e) => {
                    if (!storedUser) {
                        alert('Please log in or register to access exclusive features and become a pro user for free and access messenger.');
                    }
                });
            }
        
    
//runs everytime when user is login
onAuthStateChanged(auth, (user) => {
                console.log(user)
if (user) {
// User is signed in, call the updateUserProfile function
updateUserProfile(user);
    const uid = user.uid;
return uid
} else {
alert("Create account or login")
// User is not signed in, redirect to the registration p
    
  }
});
            
      //funtion to update tye iser profile
        function updateUserProfile(user) {
            const Email = user.email; }

            //to updtae profile section
            document.getElememtById("email").textContent = Email;


    // Handle Reset Password
    resetPasswordForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const email = resetEmailInput.value;

        // Send password reset email
        sendPasswordResetEmail(auth, email)
            .then(() => {
                alert('Password reset link sent to: ' + email);
                resetEmailInput.value = '';
                resetPasswordForm.classList.add('hidden');
                authForm.classList.remove('hidden');
            })
            .catch((error) => {
                console.error('Error sending password reset email:', error);
                alert('Error: ' + error.message);
            });
    }); 
    
// Function to display user profile information
function displayUserProfile(user) {
    const userEmail = document.getElementById('user-email');
    const userDisplayName = document.getElementById('user-display-name');
    const userPhoto = document.getElementById('user-photo');

    if (user) {
        userEmail.textContent = user.email;
        userDisplayName.textContent = user.displayName || "No display name";
        if (user.photoURL) {
            userPhoto.src = user.photoURL;
            userPhoto.style.display = "block"; // Show the image if it exists
        } else {
            userPhoto.style.display = "none"; // Hide the image if it doesn't exist
        }
    } else {
        // User is signed out
        userEmail.textContent = "No user is logged in.";
        userDisplayName.textContent = "";
        userPhoto.style.display = "none";
    }
}

// Monitor authentication state
onAuthStateChanged(auth, (user) => {
    displayUserProfile(user);
});


// Logout function
document.getElementById('logout-btn').addEventListener('click', () => {
    signOut(auth).then(() => {
        alert('Logged out successfully');
        // Optionally redirect to login page or refresh
    }).catch((error) => {
        console.error('Logout failed:', error.message);
    });
});
    
    </script>


</body>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>School Tools Platform</title>
  <style>
    
   
    
    /* Hide all sections by default */
    .feature-section {
      display: none;
      padding: 20px;
    }

    #profile-section {
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

#user-info {
    margin-bottom: 20px;
}

#user-info p {
    font-size: 1.2rem;
    margin: 5px 0;
}
    
    /* Login/Register Styles */
.auth-container {
    max-width: 400px;
    margin: 100px auto;
    padding: 30px;
    background-color: #ffffff; /* Original background */
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.auth-container h2 {
    text-align: center;
    margin-bottom: 20px;
    font-size: 24px; /* Adjust font size as needed */
}

.auth-container form {
    display: flex;
    flex-direction: column;
    margin: 20px 0; /* Added margin */
}


.auth-container form input[type="password"],
.auth-container form input[type="email"] {
    padding: 10px;
    border: 1px solid var(--color-light-gray); /* Use the specified variable */
    border-radius: 4px;
    margin-bottom: 16px;
    font-size: 14px; /* Font size adjustment */
}

.auth-container form button {
    padding: 10px;
    background-color: rgb(95, 95, 173); /* Use the specified variable */
    color: rgb(255, 255, 255);
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s; /* Transition effect */
}

.auth-container form button:hover {
    background-color: rgb(0, 0, 236) /* Use the specified variable */
}

.forgot-password {
    color: rgb(91, 91, 207);
    text-decoration: none;
}

.forgot-password:hover {
    text-decoration: underline;
}

.register-prompt {
    text-align: center;
    margin-top: 20px;
}

.register-link {
    color: rgb(67, 67, 245);
    text-decoration: none;
}

.register-link:hover {
    text-decoration: underline;
}

.error-message {
    color: var(--text-error);
    font-size: 12px;
    margin-top: -5px;
    margin-bottom: 10px;
}

.toggle-link {
    text-align: center;
    margin-top: 10px;
    color: #007BFF; /* Original link color */
    cursor: pointer;
}

.toggle-link:hover {
    text-decoration: underline;
}


    /* Sidebar Styles */
     
        
        .sidebar-item {
            display: flex;
            align-items: center;
            padding: 10px;
            color: #ecf0f1;
            text-decoration: none;
        }

        .sidebar-item i {
            margin-right: 10px; /* Space between icon and text */
        }

        .sidebar-item:hover {
            background-color: #34495e; /* Change background on hover */
        }



    .sidebar h2 {
      text-align: center;
      margin-bottom: 30px;
    }

    .sidebar a {
      display: block;
      color: white;
      padding: 15px 20px;
      text-decoration: none;
      margin-bottom: 5px;
      transition: background 0.3s;
    }

    .sidebar a:hover {
      background-color: #0056b3;
    }

    .logout-btn {
      background-color: #dc3545;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin: 20px;
      width: calc(100% - 40px);
    }

    .logout-btn:hover {
      background-color: #c82333;
    }

    /* Main Content Styles */
    .main-content {
      margin-left: 250px;
      padding: 40px;
      height: 100vh
    
       /* Hidden by default, shown after login */
      
    }

    /* Task Manager Styles */
    .task-manager {
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .task-form {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .task-form input, .task-form select {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-right: 10px;
      flex: 1 1 200px;
      margin-bottom: 10px;
    }

    .task-form button {
      padding: 10px 20px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      flex: 1 1 100px;
    }

    .task-form button:hover {
      background-color: #218838;
    }

    .task-list {
      list-style: none;
      padding: 0;
    }

    .task-item {
      background-color: #f9f9f9;
      padding: 15px;
      margin-bottom: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }

    .task-item.completed {
      text-decoration: line-through;
      background-color: #d4edda;
    }

    .task-item button {
      padding: 5px 10px;
      border: none;
      cursor: pointer;
      border-radius: 4px;
      margin-left: 5px;
      margin-top: 5px;
    }

    .complete-btn {
      background-color: #007bff;
      color: white;
    }

    .delete-btn {
      background-color: #dc3545;
      color: white;
    }

    .filter-bar {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .filter-bar select {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      flex: 1 1 200px;
      margin-bottom: 10px;
    }

    

    .themes-section {
    padding: 20px;
    background-color: #333; /* Dark background */
    border-radius: 8px;
 }

.theme-toggle {
    padding: 10px 15px;
    background-color: #555;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.theme-toggle:hover {
    background-color: #777;
}

.theme-menu {
    margin-top: 10px;
    background-color: #444;
    border-radius: 8px;
    overflow: hidden;
}

.theme-menu ul {
    list-style-type: none;
    padding: 0;
}

.theme-menu li {
    padding: 10px 15px;
}

.theme-button {
    width: 100%;
    background: none;
    border: none;
    color: white;
    text-align: left;
    cursor: pointer;
    transition: background-color 0.3s;
}

.theme-button:hover {
    background-color: #666;
}



/* Default Dark Theme */
body.dark {
    background-color: #4d4c4c; /* Dark background */
    color: #080808; /* White text */
}

body.dark .main-content {
background-color: #645d5d; /* Dark background */
color: #000000; }


body.dark .themes-section {
    background-color: #1e1e1e; /* Darker background for sections */
}

body.dark .theme-menu {
    background-color: #333; /* Dark menu background */
}

body.dark .theme-button {
    color: white; /* White text for buttons */
}

/* Yellow Theme */
body.yellow {
    background-color: #ffe600; /* Light yellow background */
    color: #333; /* Dark text */
}

body.yellow .main-content {
     background-color: #e0d251;
     color: #333; }

body.yellow .themes-section {
    background-color: #ffe600; /* Bright yellow for sections */
}

body.yellow .theme-menu {
    background-color: #ffd700; /* Gold-like menu background */
}

body.yellow .theme-button {
    color: #333; /* Dark text for buttons */
}

/* Blue Theme */
body.blue {
    background-color: #0066ff; /* Light blue background */
    color: #ffffff; /* Dark teal text */
}

body.blue .sidebar {
    background-color: #0066ff; /* Cyan sidebar */
    color: #ffffff; /* Set sidebar text color to white for better contrast */
width: 250px;
height: 100vh;
  }

body.blue .main-content {
    background-color: #588ee0; /* Match main content to blue */
}

body.blue .themes-section {
    background-color: #00bcd4; /* Cyan for sections */
}

body.blue .theme-menu {
    background-color: #00838f; /* Dark cyan for menu background */
}

body.blue .theme-button {
    color: white; /* White text for buttons */
}

/* Light Theme */
body.light {
    background-color: #fbfbfb; /* Light background */
    color: #333; /* Dark text */
}

body.light.main-content {
background-color: #e6e6e6;
color:  #333;  }


body.light .sidebar {
    background-color: #dbd5d5; /* White sidebar background */
    color: #333; /* Dark text in sidebar */
    border-right: 1px solid #ddd; /* Optional: border for separation */
    width: 250px;
    height: 100vh;
}

body.light .main-content {
    background-color: #ffffff; /* Match main content to light */
    color: #333; /* Dark text in main content */
}

/* Additional Styles for Light Theme Button */
.light-theme-button {
    padding: 10px 20px;
    background-color: #007BFF; /* Button background color */
    color: white; /* Button text color */
    border: none; /* No border */
    border-radius: 4px; /* Rounded corners */
    cursor: pointer; /* Pointer cursor on hover */
    transition: background-color 0.3s; /* Smooth transition */
}

.light-theme-button:hover {
    background-color: #0056b3; /* Darker blue on hover */
}


/* Sidebar Styles */
#sidebar {
    
    padding: 20px;
    max-width: 250px;
    width: 250px; /* Width of the sidebar */
    position: fixed;
    top: 0;
    left: 0; /* Align to the left */
    height: 100%; /* Full height */
    overflow-y: auto; /* Enable scrolling if needed */
    transition: background-color 0.3s, color 0.3s; /* Smooth transition for colors */
}

@media {
    padding: 20px;
    max-width: 250px;
    width: 250px; /* Width of the sidebar */
    top: 0;
    left: 0; /* Align to the left */
    height: 100%; /* Full height */
    overflow-y: auto; /* Enable scrolling if needed */
    transition: background-color 0.3s, color 0.3s; /* Smooth transition for colors */
}


.sidebar.dark {
    background-color: #1e1e1e; /* Dark sidebar */
    width: 250px;
    max-width: 250px;
}

.sidebar.yellow {
    background-color: #ffe600; /* Yellow sidebar */
    color: #000000; /* Dark text/icons for yellow */
    width: 250px;
    max-width: 250px;
}

.sidebar.blue {
    background-color: #0066ff; /* Cyan sidebar */
    color: rgb(0, 0, 0); /* White text/icons for blue */
    width: 250px;
    max-width: 250px;    
}

/* Sidebar Icon Styles */
.sidebar-icon {
    color: rgb(0, 0, 0); /* Default white for icons */
}

.sidebar.yellow .sidebar-icon {
    color: #020202; /* Dark icons for yellow theme */
}

.sidebar.blue .sidebar-icon {
    color: rgb(15, 15, 15); /* White icons for blue theme */
}
    
    
/* Worksheet, Quiz Generator, and Tech Updates Styles */
    .feature-section {
      display: none;
      margin-top: 50px;
    }

    .feature-section form {
      display: flex;
      flex-direction: column;
    }

    .feature-section form label {
      margin: 10px 0 5px;
    }

    .feature-section form input, .feature-section form select, .feature-section form button {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-bottom: 15px;
    }

    .feature-section form button {
      background-color: #007BFF;
      color: white;
      cursor: pointer;
    }

    .feature-section form button:hover {
      background-color: #0056b3;
    }

    /* Quiz Styles */
    .quiz-question {
      margin-bottom: 20px;
    }

    .quiz-options label {
      display: block;
      margin-bottom: 10px;
      cursor: pointer;
    }

    .quiz-submit {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
    }

    .quiz-submit:hover {
      background-color: #218838;
    }

    /* Generated Content Styles */
    #generatedWorksheet, #quizArea, #updateMessage {
      margin-top: 20px;
      padding: 20px;
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
      }
      .main-content {
        margin-left: 0;
      }

      /* Target the button in the Tech Update section */
</style>
</head>
<body>

  <!-- Authentication Container -->
  <div id="auth-container" class="auth-container">
    <h2 id="auth-title">Login</h2>
    <form id="auth-form">
      <input type="email" id="email" placeholder="Email" required>
      <input type="password" id="password" placeholder="Password" required>
      <button type="submit" id="auth-button">Login</button>
      <button type="button" id="close-button" style="display:none;">Close</button>
    </form>
    <div class="toggle-link" id="toggle-link">Don't have an account? Register here.</div>
    <div id="loading-indicator" style="display:none;">Loading... </div>
    <div id="sidebar" style="display:none;">Sidebar</div>
    <div id="main-content" style="display:none;">Main Content</div>
  </div>
  

  

    
  <!-- Main Content -->
  <div class="main-content" id="main-content">

    <!-- Task Manager Feature -->
    <div id="task-manager" class="feature-section">
      <h2>Task Manager</h2>
      <div class="task-manager">
        <h3>Manage Your Tasks</h3>
        <!-- Task Form -->
        <div class="task-form">
          <input type="text" id="taskName" placeholder="Task Name" required>
          <input type="text" id="taskDesc" placeholder="Task Description">
          <select id="taskPriority">
            <option value="low">Low Priority</option>
            <option value="medium">Medium Priority</option>
            <option value="high">High Priority</option>
          </select>
          <button onclick="addTask()">Add Task</button>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar">
          <select id="filterStatus" onchange="filterTasks()">
            <option value="all">All Tasks</option>
            <option value="completed">Completed Tasks</option>
            <option value="incomplete">Incomplete Tasks</option>
          </select>
          <select id="filterPriority" onchange="filterTasks()">
            <option value="all">All Priorities</option>
            <option value="low">Low Priority</option>
            <option value="medium">Medium Priority</option>
            <option value="high">High Priority</option>
          </select>
        </div>

        <!-- Task List -->
        <ul id="taskList" class="task-list">
          <!-- Task Items will appear here -->
        </ul>
      </div>
    </div>

    <!-- Worksheet Generator Section -->
    <div id="worksheet-generator" class="feature-section">
      <h2>Worksheet Generator</h2>
      <p>Select your preferences and generate a worksheet with random questions:</p>
      
      <form id="worksheetForm">
        <label for="subject">Choose Subject:</label>
        <select id="subject" name="subject" required>
          <option value="math">Math</option>
          <option value="science">Science</option>
        </select>
        
        <label for="numQuestions">Number of Questions:</label>
        <input type="number" id="numQuestions" name="numQuestions" min="5" max="50" required>
        
        <label for="difficulty">Difficulty Level:</label>
        <select id="difficulty" name="difficulty" required>
          <option value="easy">Easy</option>
          <option value="medium">Medium</option>
          <option value="hard">Hard</option>
        </select>

        <label for="questionType">Question Type:</label>
        <select id="questionType" name="questionType" required>
          <option value="mcq">Multiple Choice</option>
          <option value="shortAnswer">Short Answer</option>
          <option value="longAnswer">Long Answer</option>
        </select>
        
        <button type="button" onclick="generateWorksheet()">Generate Worksheet</button>
      </form>

      <div id="generatedWorksheet"></div>
    </div>

    <!-- Quiz Generator Section -->
    <div id="quiz-generator" class="feature-section">
      <h2>Quiz Generator</h2>
      <p>Select your preferences and take a quiz:</p>
      
      <form id="quizForm">
        <label for="quizSubject">Choose Subject:</label>
        <select id="quizSubject" name="quizSubject" required>
          <option value="math">Math</option>
          <option value="science">Science</option>
        </select>
        
        <label for="quizNumQuestions">Number of Questions:</label>
        <input type="number" id="quizNumQuestions" name="quizNumQuestions" min="5" max="20" required>

        <button type="button" onclick="startQuiz()">Start Quiz</button>
      </form>

      <div id="quizArea"></div>
    </div>

    <!-- About Website Section -->
    <div id="about-website" class="feature-section">
      <h2>About This Website</h2>
    <div class="about-info">
        <strong>Developer:</strong> Anagh Manglick
    </div>
    <div class="about-info">
        <strong>Class:</strong> 7th
    </div>
    <div class="about-info">
        <strong>Website Server:</strong> YES
    </div>
    <div class="about-info">
        <strong>Version:</strong> V2.8 (ALPHA TESTING)
    </div>
</div>

<!-- Profile Section -->
<div id="user-profile" class="feature-section" style="display: none;">
    <h2>User Profile</h2>
    <div id="user-info">
        <p><strong>Email:</strong> <span id="user-email"></span></p>
        </div>
    <button id="logout-btn" class="standard-button">Logout</button>
</div>

    
    <!-- Tech Updates Section -->
    <div id="tech-updates" class="feature-section">
      <h2>Tech Updates</h2>
      <button onclick="showUpdate()" style="background-color: blue; color: white; padding: 8px 16px; border: none; border-radius: 3px; cursor: pointer;">
  Check for Updates
</button>
      <div id="updateMessage"></div>
    </div>

      <!-- My Notes Section --> 
      <div id="my-notes" class="feature-section">
    <h2>My Notes</h2>
    <input type="text" id="noteName" placeholder="Note Title" style="padding: 10px; border: 1px solid #ddd; border-radius: 4px; width: calc(100% - 22px); margin-bottom: 10px;">
    <textarea id="noteContent" placeholder="Write your note here..." style="padding: 10px; border: 1px solid #ddd; border-radius: 4px; width: calc(100% - 22px); height: 100px;"></textarea>
    <button onclick="addNote()" style="padding: 10px 20px; background-color: #007BFF; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 10px;">Save Note</button>
    <ul id="notesList" style="margin-top: 20px; list-style-type: none;"></ul>
</div>

<div class="divider"></div>  

<!-- Themes Section -->
<div id="themes" class="feature-section">
    <h2>Themes</h2>
    <button id="choose-theme-button" class="theme-toggle" style="padding: 10px 20px; background-color: #007BFF; color: white; border: none; border-radius: 4px; cursor: pointer;">Choose Theme</button>
    
</div>

<div id="theme-menu" class="theme-menu" style="display: none;">
        <ul>
            <li><button id="dark-theme-button" class="theme-button" data-theme="dark">Dark Theme</button></li>
            <li><button id="yellow-theme-button" class="theme-button" data-theme="yellow">Yellow Theme</button></li>
            <li><button id="blue-theme-button" class="theme-button" data-theme="blue">Blue Theme</button></li>
            <li><button id="light-theme-button" class="theme-button" data-theme="light">Light Theme(Default)</button></li>
        </ul>
    </div>

  </div>

<script>
  //themes functions
  document.getElementById('choose-theme-button').addEventListener('click', function() {
    const themeMenu = document.getElementById('theme-menu');
    themeMenu.style.display = themeMenu.style.display === 'none' ? 'block' : 'none';
});

const themeButtons = document.querySelectorAll('.theme-button');
themeButtons.forEach(button => {
    button.addEventListener('click', function() {
        const theme = this.getAttribute('data-theme');
        document.body.className = theme; // Apply the selected theme class to the body

        // Optionally hide the menu after selection
        document.getElementById('theme-menu').style.display = 'none';
    });
});
</script>
  
  <script>
  
    // Notes Functionality
let notes = [];

// Load notes from localStorage
function loadNotes() {
    const loggedInUser  = JSON.parse(localStorage.getItem('loggedInUser '));
    if (loggedInUser ) {
        notes = JSON.parse(localStorage.getItem(`${loggedInUser .username}_notes`)) || [];
    }
}

// Save notes to localStorage
function saveNotes() {
    const loggedInUser  = JSON.parse(localStorage.getItem('loggedInUser '));
    if (loggedInUser ) {
        localStorage.setItem(`${loggedInUser .username}_notes`, JSON.stringify(notes));
    }
}

// Add Note
function saveNotes() {
      const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
      if (loggedInUser) {
        localStorage.setItem(`${loggedInUser.username}_notes`, JSON.stringify(tasks));
      }
    }

    function addNote() {
      const taskName = document.getElementById('noteName').value.trim();
      const taskDesc = document.getElementById('noteContent').value.trim();
      const taskPriority = document.getElementById('taskPriority').value;

      if (noteName) {
        const note = {
          name: noteName,
          desc: noteContent,
          
        };
        notes.push(note);
        saveNotes();
        renderNotes();
        document.getElementById('noteName').value = '';
        document.getElementById('noteContent').value = '';
      } else {
        alert('Note name is required.');
      }
    }

// Render Notes
function renderNotes() {
    const notesList = document.getElementById('notesList');
    notesList.innerHTML = '';

    notes.forEach(note => {
        const noteItem = document.createElement('li');
        noteItem.innerHTML = `<strong>${sanitize(note.name)}</strong>: ${sanitize(note.content)}`;
        notesList.appendChild(noteItem);
    });
}

// Show Notes on Load
function initNotes() {
    loadNotes();
    renderNotes();
}

// Initialize notes on page load
window.onload = initNotes;

   // Show Theme Dialog
function showThemeDialog() {
  document.getElementById('themeDialog').style.display = 'block';
}

// Close Theme Dialog
function closeThemeDialog() {
  document.getElementById('themeDialog').style.display = 'none';
}

    // Utility Function to Show Sections
    function showSection(sectionId) {
      const sections = document.querySelectorAll('.feature-section');
      sections.forEach(section => section.style.display = 'none');
      document.getElementById(sectionId).style.display = 'block';
    }

    function showFutureFeature() {
      alert("This feature will be implemented in future updates.");
    }

    // =======================
    // Task Manager Functions
    // =======================
    let tasks = [];

    // Load tasks from localStorage
    function loadTasks() {
      const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
      if (loggedInUser) {
        const userTasks = JSON.parse(localStorage.getItem(`${loggedInUser.username}_tasks`)) || [];
        tasks = userTasks;
      }
    }

    // Save tasks to localStorage
    function saveTasks() {
      const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
      if (loggedInUser) {
        localStorage.setItem(`${loggedInUser.username}_tasks`, JSON.stringify(tasks));
      }
    }

    function addTask() {
      const taskName = document.getElementById('taskName').value.trim();
      const taskDesc = document.getElementById('taskDesc').value.trim();
      const taskPriority = document.getElementById('taskPriority').value;

      if (taskName) {
        const task = {
          name: taskName,
          desc: taskDesc,
          priority: taskPriority,
          completed: false
        };
        tasks.push(task);
        saveTasks();
        renderTasks();
        document.getElementById('taskName').value = '';
        document.getElementById('taskDesc').value = '';
      } else {
        alert('Task name is required.');
      }
    }

    function renderTasks() {
      const taskList = document.getElementById('taskList');
      taskList.innerHTML = '';

      const filterStatus = document.getElementById('filterStatus').value;
      const filterPriority = document.getElementById('filterPriority').value;

      const filteredTasks = tasks.filter(task => {
        const statusMatch = filterStatus === 'all' ||
          (filterStatus === 'completed' && task.completed) ||
          (filterStatus === 'incomplete' && !task.completed);
        const priorityMatch = filterPriority === 'all' || task.priority === filterPriority;
        return statusMatch && priorityMatch;
      });

      filteredTasks.forEach((task, index) => {
        const taskItem = document.createElement('li');
        taskItem.classList.add('task-item');
        if (task.completed) {
          taskItem.classList.add('completed');
        }
        taskItem.innerHTML = `
          <div>
            <strong>${sanitize(task.name)}</strong> - ${sanitize(task.desc)} - <em>${sanitize(task.priority)}</em>
          </div>
          <div>
            <button class="complete-btn" onclick="toggleTaskComplete(${index})">${task.completed ? 'Undo' : 'Complete'}</button>
            <button class="delete-btn" onclick="deleteTask(${index})">Delete</button>
          </div>
        `;
        taskList.appendChild(taskItem);
      });
    }

    function toggleTaskComplete(index) {
      tasks[index].completed = !tasks[index].completed;
      saveTasks();
      renderTasks();
    }

    function deleteTask(index) {
      if (confirm('Are you sure you want to delete this task?')) {
        tasks.splice(index, 1);
        saveTasks();
        renderTasks();
      }
    }

    function filterTasks() {
      renderTasks();
    }

    function sanitize(input) {
      const div = document.createElement('div');
      div.textContent = input;
      return div.innerHTML;
    }

    // Initialize Task Manager
    function initTaskManager() {
      loadTasks();
      renderTasks();
    }

    // ================================
    // Worksheet Generator Functions
    // ================================
    const questionBank = {
      math: {
        easy: [
          "What is 2 + 2?",
          "What is 5 - 3?",
          "What is 3 × 4?",
          "What is 10 ÷ 2?",
          "What is the square of 3?"
        ],
        medium: [
          "Solve for x: 2x + 5 = 13.",
          "What is the area of a triangle with base 5 and height 10?",
          "Simplify: (3²) + (4²).",
          "What is the perimeter of a rectangle with length 8 and width 5?",
          "Find the value of 15% of 200."
        ],
        hard: [
          "Integrate the function f(x) = 3x².",
          "Solve the equation: x³ - 6x² + 11x - 6 = 0.",
          "What is the derivative of sin(x)?",
          "Calculate the limit: lim(x→0) (sin(x)/x).",
          "What is the solution to the differential equation dy/dx = 2x?"
        ]
      },
      science: {
        easy: [
          "What is the chemical symbol for water?",
          "What planet is known as the Red Planet?",
          "What gas do plants absorb from the atmosphere?",
          "What is H₂O commonly known as?",
          "What force keeps us grounded on Earth?"
        ],
        medium: [
          "What is the powerhouse of the cell?",
          "What is the chemical formula for table salt?",
          "Define Newton's Second Law of Motion.",
          "What is the process by which plants make their food?",
          "Name the three states of matter."
        ],
        hard: [
          "Explain the theory of relativity.",
          "What is the Heisenberg Uncertainty Principle?",
          "Describe the process of nuclear fusion.",
          "What is the significance of the Pauli Exclusion Principle?",
          "Define Schrödinger's Cat paradox."
        ]
      }
    };

    function generateWorksheet() {
      const subject = document.getElementById('subject').value;
      const numQuestions = parseInt(document.getElementById('numQuestions').value);
      const difficulty = document.getElementById('difficulty').value;
      const questionType = document.getElementById('questionType').value;

      const availableQuestions = questionBank[subject][difficulty];
      if (!availableQuestions) {
        alert('No questions available for the selected options.');
        return;
      }

      if (numQuestions > availableQuestions.length) {
        alert(`Only ${availableQuestions.length} questions available for ${subject} (${difficulty} difficulty).`);
        return;
      }

      const selectedQuestions = shuffleArray(availableQuestions).slice(0, numQuestions);
      let worksheetContent = `<h3>Generated Worksheet for ${capitalize(subject)}</h3><ol>`;
      
      selectedQuestions.forEach((q, index) => {
        worksheetContent += `<li>${q}</li>`;
      });
      worksheetContent += `</ol>`;

      document.getElementById('generatedWorksheet').innerHTML = worksheetContent;
    }

    // Utility function to shuffle an array
    function shuffleArray(array) {
      let currentIndex = array.length, temporaryValue, randomIndex;

      // While there remain elements to shuffle...
      while (0 !== currentIndex) {

        // Pick a remaining element...
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;

        // And swap it with the current element.
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
      }

      return array;
    }

    // Capitalize first letter
    function capitalize(str) {
      return str.charAt(0).toUpperCase() + str.slice(1);
    }

    // ==========================
    // Quiz Generator Functions
    // ==========================
    let currentQuiz = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let userAnswers = [];

    // Define correct answers for each question
    const correctAnswers = {
      math: {
        easy: {
          "What is 2 + 2?": "4",
          "What is 5 - 3?": "2",
          "What is 3 × 4?": "12",
          "What is 10 ÷ 2?": "5",
          "What is the square of 3?": "9"
        },
        medium: {
          "Solve for x: 2x + 5 = 13.": "4",
          "What is the area of a triangle with base 5 and height 10?": "25",
          "Simplify: (3²) + (4²).": "25",
          "What is the perimeter of a rectangle with length 8 and width 5?": "26",
          "Find the value of 15% of 200.": "30"
        },
        hard: {
          "Integrate the function f(x) = 3x².": "x³ + C",
          "Solve the equation: x³ - 6x² + 11x - 6 = 0.": "1, 2, 3",
          "What is the derivative of sin(x)?": "cos(x)",
          "Calculate the limit: lim(x→0) (sin(x)/x).": "1",
          "What is the solution to the differential equation dy/dx = 2x?": "y = x² + C"
        }
      },
      science: {
        easy: {
          "What is the chemical symbol for water?": "H₂O",
          "What planet is known as the Red Planet?": "Mars",
          "What gas do plants absorb from the atmosphere?": "Carbon Dioxide",
          "What is H₂O commonly known as?": "Water",
          "What force keeps us grounded on Earth?": "Gravity"
        },
        medium: {
          "What is the powerhouse of the cell?": "Mitochondria",
          "What is the chemical formula for table salt?": "NaCl",
          "Define Newton's Second Law of Motion.": "Force equals mass times acceleration (F=ma)",
          "What is the process by which plants make their food?": "Photosynthesis",
          "Name the three states of matter.": "Solid, Liquid, Gas"
        },
        hard: {
          "Explain the theory of relativity.": "A theory by Einstein that describes the laws of physics in the presence of gravitational fields and high velocities.",
          "What is the Heisenberg Uncertainty Principle?": "It states that the position and momentum of a particle cannot both be precisely determined simultaneously.",
          "Describe the process of nuclear fusion.": "Combining two light atomic nuclei to form a heavier nucleus, releasing energy.",
          "What is the significance of the Pauli Exclusion Principle?": "No two fermions can occupy the same quantum state simultaneously.",
          "Define Schrödinger's Cat paradox.": "A thought experiment that illustrates the concept of superposition in quantum mechanics."
        }
      }
    };

    function startQuiz() {
      const subject = document.getElementById('quizSubject').value;
      const numQuestions = parseInt(document.getElementById('quizNumQuestions').value);

      const difficulty = 'medium'; // Fixed difficulty for quizzes; can be made dynamic if desired
      const availableQuestions = Object.keys(correctAnswers[subject][difficulty]);
      if (!availableQuestions) {
        alert('No questions available for the selected options.');
        return;
      }

      if (numQuestions > availableQuestions.length) {
        alert(`Only ${availableQuestions.length} questions available for ${subject} (medium difficulty).`);
        return;
      }

      currentQuiz = shuffleArray(availableQuestions).slice(0, numQuestions);
      currentQuestionIndex = 0;
      score = 0;
      userAnswers = [];
      document.getElementById('quizArea').innerHTML = '';
      displayQuizQuestion();
    }

    function displayQuizQuestion() {
      if (currentQuestionIndex < currentQuiz.length) {
        const question = currentQuiz[currentQuestionIndex];
        const quizArea = document.getElementById('quizArea');

        // Generate multiple choice options if question type is MCQ
        const isMCQ = question.includes("What") || question.includes("Define") || question.includes("Explain");
        let optionsHTML = '';
        let correctAnswer = correctAnswers[getCurrentQuizSubject()][getCurrentQuizDifficulty()][question];
        let options = [];

        if (isMCQ) {
          // Generate random options
          options = generateMCQOptions(correctAnswer);
          optionsHTML = options.map((opt, idx) => `
            <input type="radio" id="option${idx+1}" name="answer" value="${opt}">
            <label for="option${idx+1}">${opt}</label>
          `).join('');
        } else {
          // Short or long answer
          optionsHTML = `<input type="text" id="answerInput" placeholder="Type your answer here">`;
        }

        quizArea.innerHTML = `
          <div class="quiz-question">
            <strong>Question ${currentQuestionIndex + 1}:</strong> ${sanitize(question)}
          </div>
          <div class="quiz-options">
            ${optionsHTML}
          </div>
          <button class="quiz-submit" onclick="submitQuizAnswer()">Submit Answer</button>
        `;
      } else {
        displayQuizResult();
      }
    }

    function generateMCQOptions(correctAnswer) {
      const dummyOptions = generateDummyOptions(correctAnswer);
      dummyOptions.push(correctAnswer);
      return shuffleArray(dummyOptions).slice(0, 4);
    }

    function generateDummyOptions(correctAnswer) {
      let options = [];
      for (let i = 0; i < 3; i++) {
        let option;
        do {
          option = generateRandomOption(correctAnswer);
        } while (options.includes(option) || option === correctAnswer);
        options.push(option);
      }
      return options;
    }

    function generateRandomOption(correctAnswer) {
      // Simple random option generator; can be improved based on subject and type
      const randomNumber = Math.floor(Math.random() * 100) + 1;
      return randomNumber.toString();
    }

    function submitQuizAnswer() {
      const subject = getCurrentQuizSubject();
      const difficulty = getCurrentQuizDifficulty();
      const question = currentQuiz[currentQuestionIndex];
      const correctAnswer = correctAnswers[subject][difficulty][question];

      let userAnswer = '';
      const selectedOption = document.querySelector('input[name="answer"]:checked');
      if (selectedOption) {
        userAnswer = selectedOption.value.trim();
      } else {
        const textInput = document.getElementById('answerInput');
        if (textInput) {
          userAnswer = textInput.value.trim();
        }
      }

      if (userAnswer === '') {
        alert('Please provide an answer.');
        return;
      }

      userAnswers.push(userAnswer);

      // Normalize answers for comparison
      const normalizedUserAnswer = userAnswer.toLowerCase();
      const normalizedCorrectAnswer = correctAnswer.toLowerCase();

      if (normalizedUserAnswer === normalizedCorrectAnswer) {
        score += 1;
      }

      currentQuestionIndex += 1;
      displayQuizQuestion();
    }

    function displayQuizResult() {
      const quizArea = document.getElementById('quizArea');
      quizArea.innerHTML = `
        <h3>Quiz Completed!</h3>
        <p>Your Score: ${score} out of ${currentQuiz.length}</p>
        <button onclick="reviewQuiz()">Review Answers</button>
      `;
    }

    function reviewQuiz() {
      const quizArea = document.getElementById('quizArea');
      let reviewContent = `<h3>Quiz Review</h3><ol>`;
      for (let i = 0; i < currentQuiz.length; i++) {
        const question = currentQuiz[i];
        const userAnswer = userAnswers[i];
        const correctAnswer = correctAnswers[getCurrentQuizSubject()][getCurrentQuizDifficulty()][question];
        reviewContent += `
          <li>
            <strong>${sanitize(question)}</strong><br>
            Your Answer: ${sanitize(userAnswer)}<br>
            Correct Answer: ${sanitize(correctAnswer)}<br>
            ${userAnswer.toLowerCase() === correctAnswer.toLowerCase() ? '<span style="color:green;">Correct</span>' : '<span style="color:red;">Incorrect</span>'}
          </li>
        `;
      }
      reviewContent += `</ol>`;
      quizArea.innerHTML = reviewContent;
    }

    function getCurrentQuizSubject() {
      return document.getElementById('quizSubject').value;
    }

    function getCurrentQuizDifficulty() {
      return 'medium'; // Fixed difficulty; modify if needed
    }

    // =====================
    // Tech Updates Function
    // =====================
    function showUpdate() {
      document.getElementById('updateMessage').innerHTML = "There is a bug in this section as we are devloping the weekly auto change the  content of tech update section , so the tech updtate will be fixed in V3 update on the special occasion of new yeaar";
    }

    // =====================
    // Initialization
    // =====================
    window.onload = function() {
      const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
      if (loggedInUser) {
        showApp();
        initTaskManager();
      }
    }
  </script>

</body>
</html>
